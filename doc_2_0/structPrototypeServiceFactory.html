---
layout: default
title: PrototypeServiceFactory Struct Reference
---
  <head>
    <title>C++ Micro Services: PrototypeServiceFactory Struct Reference</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
  </head>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="structPrototypeServiceFactory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PrototypeServiceFactory Struct Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group__MicroServices.html">Micro Services Classes</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A factory for <a class="el" href="namespaceServiceConstants.html#a2c8d31ab79a0729525b6f0bf0678de4b">prototype scope</a> services.  
 <a href="structPrototypeServiceFactory.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for PrototypeServiceFactory:</div>
<div class="dyncontent">
<div class="center"><img src="structPrototypeServiceFactory__inherit__graph.png" border="0" usemap="#PrototypeServiceFactory_inherit__map" alt="Inheritance graph"/></div>
<map name="PrototypeServiceFactory_inherit__map" id="PrototypeServiceFactory_inherit__map">
<area shape="rect" id="node2" href="classServiceFactory.html" title="A factory for module scope services. " alt="" coords="36,5,151,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for PrototypeServiceFactory:</div>
<div class="dyncontent">
<div class="center"><img src="structPrototypeServiceFactory__coll__graph.png" border="0" usemap="#PrototypeServiceFactory_coll__map" alt="Collaboration graph"/></div>
<map name="PrototypeServiceFactory_coll__map" id="PrototypeServiceFactory_coll__map">
<area shape="rect" id="node2" href="classServiceFactory.html" title="A factory for module scope services. " alt="" coords="36,5,151,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ade26d6c7af2818e7dbabc0ab20487ce9"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__MicroServices.html#ga5b79f53257c6f566b36781eca6af9beb">InterfaceMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPrototypeServiceFactory.html#ade26d6c7af2818e7dbabc0ab20487ce9">GetService</a> (<a class="el" href="classModule.html">Module</a> *module, const <a class="el" href="classServiceRegistrationBase.html">ServiceRegistrationBase</a> &amp;registration)=0</td></tr>
<tr class="memdesc:ade26d6c7af2818e7dbabc0ab20487ce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a service object for a caller.  <a href="#ade26d6c7af2818e7dbabc0ab20487ce9">More...</a><br/></td></tr>
<tr class="separator:ade26d6c7af2818e7dbabc0ab20487ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a6c6e7dab9ca7060a5492789403a4a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPrototypeServiceFactory.html#ad5a6c6e7dab9ca7060a5492789403a4a">UngetService</a> (<a class="el" href="classModule.html">Module</a> *module, const <a class="el" href="classServiceRegistrationBase.html">ServiceRegistrationBase</a> &amp;registration, const <a class="el" href="group__MicroServices.html#ga5b79f53257c6f566b36781eca6af9beb">InterfaceMap</a> &amp;service)=0</td></tr>
<tr class="memdesc:ad5a6c6e7dab9ca7060a5492789403a4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases a service object created for a caller.  <a href="#ad5a6c6e7dab9ca7060a5492789403a4a">More...</a><br/></td></tr>
<tr class="separator:ad5a6c6e7dab9ca7060a5492789403a4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classServiceFactory"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classServiceFactory')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classServiceFactory.html">ServiceFactory</a></td></tr>
<tr class="memitem:a9fccf8deac202cec300caf2068aa4ff1 inherit pub_methods_classServiceFactory"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServiceFactory.html#a9fccf8deac202cec300caf2068aa4ff1">~ServiceFactory</a> ()</td></tr>
<tr class="separator:a9fccf8deac202cec300caf2068aa4ff1 inherit pub_methods_classServiceFactory"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A factory for <a class="el" href="namespaceServiceConstants.html#a2c8d31ab79a0729525b6f0bf0678de4b">prototype scope</a> services. </p>
<p>The factory can provide multiple, unique service objects.</p>
<p>When registering a service, a <a class="el" href="structPrototypeServiceFactory.html" title="A factory for prototype scope services. ">PrototypeServiceFactory</a> object can be used instead of a service object, so that the module developer can create a unique service object for each caller that is using the service. When a caller uses a <a class="el" href="classServiceObjects.html" title="Allows multiple service objects for a service to be obtained. ">ServiceObjects</a> to request a service instance, the framework calls the GetService method to return a service object specifically for the requesting caller. The caller can release the returned service object and the framework will call the UngetService method with the service object. When a module uses the <a class="el" href="classModuleContext.html#aa048066fdb8b9a5cfa250d9b17915437" title="Returns the service object referenced by the specified ServiceReferenceBase object. ">ModuleContext::GetService(const ServiceReferenceBase&amp;)</a> method to obtain a service object, the framework acts as if the service has module scope. That is, the framework will call the GetService method to obtain a module-scoped instance which will be cached and have a use count. See <a class="el" href="classServiceFactory.html" title="A factory for module scope services. ">ServiceFactory</a>.</p>
<p>A module can use both <a class="el" href="classServiceObjects.html" title="Allows multiple service objects for a service to be obtained. ">ServiceObjects</a> and <a class="el" href="classModuleContext.html#aa048066fdb8b9a5cfa250d9b17915437" title="Returns the service object referenced by the specified ServiceReferenceBase object. ">ModuleContext::GetService(const ServiceReferenceBase&amp;)</a> to obtain a service object for a service. <a class="el" href="classServiceObjects.html#a85779ccba243ed69fc185b54fc02f7ed" title="Returns a service object for the referenced service. ">ServiceObjects::GetService()</a> will always return an instance provided by a call to <a class="el" href="structPrototypeServiceFactory.html#ade26d6c7af2818e7dbabc0ab20487ce9" title="Returns a service object for a caller. ">GetService(Module*, const ServiceRegistrationBase&amp;)</a> and <a class="el" href="classModuleContext.html#aa048066fdb8b9a5cfa250d9b17915437" title="Returns the service object referenced by the specified ServiceReferenceBase object. ">ModuleContext::GetService(const ServiceReferenceBase&amp;)</a> will always return the module-scoped instance. <a class="el" href="structPrototypeServiceFactory.html" title="A factory for prototype scope services. ">PrototypeServiceFactory</a> objects are only used by the framework and are not made available to other modules. The framework may concurrently call a <a class="el" href="structPrototypeServiceFactory.html" title="A factory for prototype scope services. ">PrototypeServiceFactory</a>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classModuleContext.html#abb59411d496f0f688a3fb3ccb8d50bc7" title="Returns the ServiceObjects object for the service referenced by the specified ServiceReference object...">ModuleContext::GetServiceObjects()</a> </dd>
<dd>
<a class="el" href="classServiceObjects.html" title="Allows multiple service objects for a service to be obtained. ">ServiceObjects</a> </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ade26d6c7af2818e7dbabc0ab20487ce9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__MicroServices.html#ga5b79f53257c6f566b36781eca6af9beb">InterfaceMap</a> PrototypeServiceFactory::GetService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classModule.html">Module</a> *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classServiceRegistrationBase.html">ServiceRegistrationBase</a> &amp;&#160;</td>
          <td class="paramname"><em>registration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a service object for a caller. </p>
<p>The framework invokes this method for each caller requesting a service object using <a class="el" href="classServiceObjects.html#a85779ccba243ed69fc185b54fc02f7ed" title="Returns a service object for the referenced service. ">ServiceObjects::GetService()</a>. The factory can then return a specific service object for the caller. The framework checks that the returned service object is valid. If the returned service object is empty or does not contain entries for all the interfaces named when the service was registered, a warning is issued and NULL is returned to the caller. If this method throws an exception, a warning is issued and NULL is returned to the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>The module requesting the service. </td></tr>
    <tr><td class="paramname">registration</td><td>The <a class="el" href="classServiceRegistrationBase.html" title="A registered service. ">ServiceRegistrationBase</a> object for the requested service. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A service object that must contain entries for all the interfaces named when the service was registered.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classServiceObjects.html#a85779ccba243ed69fc185b54fc02f7ed" title="Returns a service object for the referenced service. ">ServiceObjects::GetService()</a> </dd>
<dd>
<a class="el" href="group__MicroServices.html#ga5b79f53257c6f566b36781eca6af9beb" title="A map containing interfaces ids and their corresponding service object pointers. ">InterfaceMap</a> </dd></dl>

<p>Implements <a class="el" href="classServiceFactory.html#ad11f9698cd9d71ffad77d84b02d0d04e">ServiceFactory</a>.</p>

</div>
</div>
<a class="anchor" id="ad5a6c6e7dab9ca7060a5492789403a4a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void PrototypeServiceFactory::UngetService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classModule.html">Module</a> *&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classServiceRegistrationBase.html">ServiceRegistrationBase</a> &amp;&#160;</td>
          <td class="paramname"><em>registration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__MicroServices.html#ga5b79f53257c6f566b36781eca6af9beb">InterfaceMap</a> &amp;&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases a service object created for a caller. </p>
<p>The framework invokes this method when a service has been released by a modules such as by calling <a class="el" href="classServiceObjects.html#aa8b2b24f2b5b6e662e31fd862ed83cba" title="Releases a service object for the referenced service. ">ServiceObjects::UngetService()</a>. The service object may then be destroyed. If this method throws an exception, a warning is issued.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>The module releasing the service. </td></tr>
    <tr><td class="paramname">registration</td><td>The <a class="el" href="classServiceRegistrationBase.html" title="A registered service. ">ServiceRegistrationBase</a> object for the service being released. </td></tr>
    <tr><td class="paramname">service</td><td>The service object returned by a previous call to the GetService method.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classServiceObjects.html#aa8b2b24f2b5b6e662e31fd862ed83cba" title="Releases a service object for the referenced service. ">ServiceObjects::UngetService()</a> </dd></dl>

<p>Implements <a class="el" href="classServiceFactory.html#aa80a6cbdc96eec60cf135afabcbb1a65">ServiceFactory</a>.</p>

</div>
</div>
</div><!-- contents -->

  <hr class="footer"/>
  <address class="footer"><small>Generated on Mon Dec 23 2013 for C++ Micro Services 2.0.0 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.5
</small></address>
