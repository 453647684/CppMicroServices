---
layout: default
title: CMake Functions
---
  <head>
    <title>C++ Micro Services: CMake Functions</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
  </head>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CMake Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>This category includes CMake utility functions for external projects.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3d7cb4d37474c641bb8ae55a044e74aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MicroServicesCMake.html#ga3d7cb4d37474c641bb8ae55a044e74aa">usFunctionAddResources</a> ()</td></tr>
<tr class="memdesc:ga3d7cb4d37474c641bb8ae55a044e74aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add resources to a library or executable.  <a href="#ga3d7cb4d37474c641bb8ae55a044e74aa">More...</a><br /></td></tr>
<tr class="separator:ga3d7cb4d37474c641bb8ae55a044e74aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94c0897d7c0b1dd34fdf17ac7e55f6f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MicroServicesCMake.html#ga94c0897d7c0b1dd34fdf17ac7e55f6f0">usFunctionEmbedResources</a> ()</td></tr>
<tr class="memdesc:ga94c0897d7c0b1dd34fdf17ac7e55f6f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Embed resources in a library or executable.  <a href="#ga94c0897d7c0b1dd34fdf17ac7e55f6f0">More...</a><br /></td></tr>
<tr class="separator:ga94c0897d7c0b1dd34fdf17ac7e55f6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b72f7ba11ea53a3039893522d318168"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MicroServicesCMake.html#ga9b72f7ba11ea53a3039893522d318168">usFunctionGenerateModuleInit</a> (src_var)</td></tr>
<tr class="memdesc:ga9b72f7ba11ea53a3039893522d318168"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a source file which handles proper initialization of a module.  <a href="#ga9b72f7ba11ea53a3039893522d318168">More...</a><br /></td></tr>
<tr class="separator:ga9b72f7ba11ea53a3039893522d318168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3650e8bb272492730d4cd60e59c7e397"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MicroServicesCMake.html#ga3650e8bb272492730d4cd60e59c7e397">usFunctionGetResourceSource</a> ()</td></tr>
<tr class="memdesc:ga3650e8bb272492730d4cd60e59c7e397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a source file name for handling resource dependencies.  <a href="#ga3650e8bb272492730d4cd60e59c7e397">More...</a><br /></td></tr>
<tr class="separator:ga3650e8bb272492730d4cd60e59c7e397"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This category includes CMake utility functions for external projects. </p>
<p>External projects can include the CMake scripts provided by the CppMicroServices library to automatically generate module initialization code and to embed external resources into a modules shared library. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga3d7cb4d37474c641bb8ae55a044e74aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">usFunctionAddResources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add resources to a library or executable. </p>
<p>This CMake function uses an external command line program to generate a ZIP archive containing data from external resources such as text files or images or other ZIP archives. The created archive file can be appended or linked into the target file using the usFunctionEmbedResources macro.</p>
<p>Each module can call this function to add resources and make them available at runtime through the <a class="el" href="classModule.html" title="Represents a CppMicroServices module. ">Module</a> class. Multiple calls to this function append the input files.</p>
<p>In the case of linking static modules which contain resources to the target module, adding the static module target name to the ZIP_ARCHIVES list will merge its resources into the target module.</p>
<p>Example usage: </p><div class="fragment"><div class="line">set(module_srcs )</div>
<div class="line"><a class="code" href="group__MicroServicesCMake.html#ga3d7cb4d37474c641bb8ae55a044e74aa">usFunctionAddResources</a>(TARGET mylib</div>
<div class="line">                       MODULE_NAME org_me_mylib</div>
<div class="line">                       FILES config.properties logo.png</div>
<div class="line">                      )</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>(required) The target to which the resource files are added. </td></tr>
    <tr><td class="paramname">MODULE_NAME</td><td>(required/optional) The module name of the target, as specified in the <code>US_MODULE_NAME</code> pre-processor definition of that target. This parameter is optional if a target property with the name US_MODULE_NAME exists, containing the required module name. </td></tr>
    <tr><td class="paramname">COMPRESSION_LEVEL</td><td>(optional) The zip compression level (0-9). Defaults to the default zip level. Level 0 disables compression. </td></tr>
    <tr><td class="paramname">WORKING_DIRECTORY</td><td>(optional) The root path for all resource files listed after the FILES argument. If no or a relative path is given, it is considered relative to the current CMake source directory. </td></tr>
    <tr><td class="paramname">FILES</td><td>(optional) A list of resource files (paths to external files in the file system) relative to the current working directory. </td></tr>
    <tr><td class="paramname">ZIP_ARCHIVES</td><td>(optional) A list of zip archives (relative to the current working directory or absolute file paths) whose contents is merged into the target module. If a list entry is a valid target name and that target is a static library, its absolute file path is used instead.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__MicroServicesCMake.html#ga94c0897d7c0b1dd34fdf17ac7e55f6f0" title="Embed resources in a library or executable. ">usFunctionEmbedResources</a> </dd>
<dd>
<a class="el" href="MicroServices_Resources.html">The Resources System</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga94c0897d7c0b1dd34fdf17ac7e55f6f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">usFunctionEmbedResources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Embed resources in a library or executable. </p>
<p>This CMake function uses an external command line program to generate a ZIP archive containing data from external resources such as text files or images or other ZIP archives. The created archive file is appended or embedded as a binary blob to the target file.</p>
<dl class="section note"><dt>Note</dt><dd>To set-up correct file dependencies from your module target to your resource files, you have to add a special source file to the source list of the target. The source file name can be retrieved by using <a class="el" href="group__MicroServicesCMake.html#ga3650e8bb272492730d4cd60e59c7e397" title="Get a source file name for handling resource dependencies. ">usFunctionGetResourceSource</a>. This ensures that changed resource files will automatically be re-added to the module.</dd></dl>
<p>There are two differend modes for including resources: APPEND and LINK. In APPEND mode, the generated zip file is appended at the end of the target file. In LINK mode, the zip file is compiled / linked into the target using platform specific techniques. LINK mode is necessary if certain tools make additional assumptions about the object layout of the target file (e.g. codesign on MacOS). LINK mode may result in slower module initialization and bigger object files. The default mode is LINK mode on MacOS and APPEND mode on all other platforms.</p>
<p>Example usage: </p><div class="fragment"><div class="line">set(module_srcs )</div>
<div class="line"><a class="code" href="group__MicroServicesCMake.html#ga94c0897d7c0b1dd34fdf17ac7e55f6f0">usFunctionEmbedResources</a>(TARGET mylib</div>
<div class="line">                       MODULE_NAME org_me_mylib</div>
<div class="line">                       FILES config.properties logo.png</div>
<div class="line">                      )</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>(required) The target to which the resource files are added. </td></tr>
    <tr><td class="paramname">MODULE_NAME</td><td>(required/optional) The module name of the target, as specified in the <code>US_MODULE_NAME</code> pre-processor definition of that target. This parameter is optional if a target property with the name US_MODULE_NAME exists, containing the required module name. </td></tr>
    <tr><td class="paramname">APPEND</td><td>Append the resources zip file to the target file. </td></tr>
    <tr><td class="paramname">LINK</td><td>Link (embed) the resources zip file if possible.</td></tr>
  </table>
  </dd>
</dl>
<p>For the WORKING_DIRECTORY, COMPRESSION_LEVEL, FILES, ZIP_ARCHIVES parameters see the documentation of the usFunctionAddResources macro which is called with these parameters if set.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__MicroServicesCMake.html#ga3d7cb4d37474c641bb8ae55a044e74aa" title="Add resources to a library or executable. ">usFunctionAddResources</a> </dd>
<dd>
<a class="el" href="group__MicroServicesCMake.html#ga3650e8bb272492730d4cd60e59c7e397" title="Get a source file name for handling resource dependencies. ">usFunctionGetResourceSource</a> </dd>
<dd>
<a class="el" href="MicroServices_Resources.html">The Resources System</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga9b72f7ba11ea53a3039893522d318168"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">usFunctionGenerateModuleInit </td>
          <td>(</td>
          <td class="paramtype">src_var&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a source file which handles proper initialization of a module. </p>
<p>This CMake function will store the path to a generated source file in the src_var variable, which should be compiled into a module. The modules source code must be compiled with the US_MODULE_NAME pre-processor definition. Example usage:</p>
<div class="fragment"><div class="line">set(module_srcs )</div>
<div class="line"><a class="code" href="group__MicroServicesCMake.html#ga9b72f7ba11ea53a3039893522d318168">usFunctionGenerateModuleInit</a>(module_srcs)</div>
<div class="line">add_library(mylib ${module_srcs})</div>
<div class="line">set_property(TARGET ${mylib} APPEND PROPERTY COMPILE_DEFINITIONS US_MODULE_NAME=MyModule)</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_var</td><td>(required) The name of a list variable to which the path of the generated source file will be appended.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="MicroServices_AutoLoading.html">Auto Loading Modules</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga3650e8bb272492730d4cd60e59c7e397"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">usFunctionGetResourceSource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a source file name for handling resource dependencies. </p>
<p>This CMake function retrieves the name of a generated file which has to be added to a modules source file list to set-up resource file dependencies. This ensures that changed resource files will automatically be re-added to the module.</p>
<p>Example usage: </p><div class="fragment"><div class="line">set(module_srcs mylib.cpp)</div>
<div class="line"><a class="code" href="group__MicroServicesCMake.html#ga3650e8bb272492730d4cd60e59c7e397">usFunctionGetResourceSource</a>(TARGET mylib</div>
<div class="line">                            OUT module_srcs</div>
<div class="line">                           )</div>
<div class="line">add_library(mylib ${module_srcs})</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">TARGET</td><td>(required) The name of the target to which the resource files are added. </td></tr>
    <tr><td class="paramname">OUT</td><td>(required) A list variable to which the file name will be appended. </td></tr>
    <tr><td class="paramname">LINK</td><td>(optional) Generate a suitable source file for LINK mode. </td></tr>
    <tr><td class="paramname">APPEND</td><td>(optional) Generate a suitable source file for APPEND mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__MicroServicesCMake.html#ga3d7cb4d37474c641bb8ae55a044e74aa" title="Add resources to a library or executable. ">usFunctionAddResources</a> </dd>
<dd>
<a class="el" href="group__MicroServicesCMake.html#ga94c0897d7c0b1dd34fdf17ac7e55f6f0" title="Embed resources in a library or executable. ">usFunctionEmbedResources</a> </dd></dl>

</div>
</div>
</div><!-- contents -->

  <hr class="footer"/>
  <address class="footer"><small>Generated on Tue Oct 6 2015 for C++ Micro Services 2.99.0 by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.9.1
</small></address>
